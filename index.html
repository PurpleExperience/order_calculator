<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #ff6b6b, #ee5a24);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }

        .content {
            padding: 30px;
        }

        .input-section {
            margin-bottom: 30px;
        }

        .input-section h2 {
            color: #333;
            margin-bottom: 15px;
            font-size: 1.5em;
        }

        textarea {
            width: 100%;
            height: 150px;
            padding: 15px;
            border: 2px solid #e1e8ed;
            border-radius: 12px;
            font-size: 14px;
            font-family: monospace;
            resize: vertical;
            transition: border-color 0.3s ease;
        }

        textarea:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .parse-btn {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            font-size: 16px;
            cursor: pointer;
            margin-top: 15px;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }

        .parse-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.3);
        }

        .people-section {
            margin: 30px 0;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 12px;
        }

        .people-input {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }

        .people-input input {
            flex: 1;
            min-width: 200px;
            padding: 10px 15px;
            border: 2px solid #e1e8ed;
            border-radius: 8px;
            font-size: 14px;
        }

        .add-person-btn {
            background: #28a745;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            transition: background 0.3s ease;
        }

        .add-person-btn:hover {
            background: #218838;
        }

        .people-list {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }

        .person-tag {
            background: linear-gradient(135deg, #ff6b6b, #ee5a24);
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .remove-person {
            background: rgba(255,255,255,0.3);
            border: none;
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            cursor: pointer;
            font-size: 12px;
        }

        .items-section {
            margin-top: 30px;
        }

        .item-card {
            background: white;
            border: 2px solid #e1e8ed;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 15px;
            transition: border-color 0.3s ease, transform 0.2s ease;
        }

        .item-card:hover {
            border-color: #667eea;
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.1);
        }

        .item-header {
            display: flex;
            justify-content: between;
            align-items: center;
            margin-bottom: 15px;
            flex-wrap: wrap;
            gap: 10px;
        }

        .item-name {
            font-weight: bold;
            color: #333;
            font-size: 1.1em;
            flex: 1;
        }

        .item-price {
            color: #28a745;
            font-weight: bold;
            font-size: 1.2em;
        }

        .person-checkboxes {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
        }

		.checkbox-wrapper {
			display: flex;
			align-items: center;
			gap: 10px;
			cursor: pointer;
			padding: 8px 12px;
			border-radius: 8px;
			transition: all 0.3s ease;
			background: #f5f7fa;
			border: 1px solid #e1e8ed;
		}

		.checkbox-wrapper:hover {
			background: #e6f0ff;
			border-color: #b3c6ff;
			transform: translateY(-2px);
			box-shadow: 0 2px 5px rgba(0,0,0,0.1);
		}

		.checkbox-wrapper input[type="checkbox"] {
			-webkit-appearance: none;
			appearance: none;
			width: 20px;
			height: 20px;
			border: 2px solid #667eea;
			border-radius: 4px;
			outline: none;
			cursor: pointer;
			position: relative;
			transition: all 0.2s ease;
		}

		.checkbox-wrapper input[type="checkbox"]:checked {
			background-color: #667eea;
			border-color: #667eea;
		}

		.checkbox-wrapper input[type="checkbox"]:checked::after {
			content: "‚úì";
			position: absolute;
			color: white;
			font-size: 14px;
			left: 50%;
			top: 50%;
			transform: translate(-50%, -50%);
		}

		.checkbox-wrapper input[type="checkbox"]:focus {
			box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.3);
		}
		
		.checkbox-wrapper.checked {
			background: #e6f0ff;
			border-color: #667eea;
			font-weight: 500;
		}

        .summary {
            margin-top: 40px;
            padding: 25px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            border-radius: 15px;
            color: white;
        }

        .summary h2 {
            margin-bottom: 20px;
            text-align: center;
            font-size: 1.8em;
        }

        .person-summary {
            background: rgba(255,255,255,0.1);
            padding: 15px;
            margin-bottom: 15px;
            border-radius: 10px;
            backdrop-filter: blur(10px);
        }

        .person-name {
            font-weight: bold;
            font-size: 1.2em;
            margin-bottom: 10px;
        }

        .person-items {
            margin-bottom: 10px;
            font-size: 0.9em;
            opacity: 0.9;
        }

        .person-total {
            font-weight: bold;
            font-size: 1.1em;
            text-align: right;
        }

        .error {
            color: #dc3545;
            background: #f8d7da;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            border: 1px solid #f5c6cb;
        }

        .hidden {
            display: none;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 2em;
            }
            
            .content {
                padding: 20px;
            }
            
            .people-input {
                flex-direction: column;
            }
            
            .people-input input {
                min-width: auto;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üçï –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞</h1>
            <p>–õ–µ–≥–∫–æ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ —Å—á–µ—Ç –º–µ–∂–¥—É –¥—Ä—É–∑—å—è–º–∏</p>
        </div>
        
        <div class="content">
            <div class="input-section">
                <h2>üìù –í—Å—Ç–∞–≤—å—Ç–µ —Ç–µ–∫—Å—Ç –∑–∞–∫–∞–∑–∞(–Ø–Ω–¥–µ–∫—Å–ï–¥–∞)</h2>
                <textarea id="orderText" placeholder="–í—Å—Ç–∞–≤—å—Ç–µ —Å—é–¥–∞ —Ç–µ–∫—Å—Ç –∑–∞–∫–∞–∑–∞, –Ω–∞—á–∏–Ω–∞—é—â–∏–π—Å—è —Å '–°–æ—Å—Ç–∞–≤ –∑–∞–∫–∞–∑–∞' –∏ –∑–∞–∫–∞–Ω—á–∏–≤–∞—é—â–∏–π—Å—è '–ò—Ç–æ–≥–æ XXX ‚ÇΩ'..."></textarea>
                <button class="parse-btn" onclick="parseOrder()">–û–±—Ä–∞–±–æ—Ç–∞—Ç—å –∑–∞–∫–∞–∑</button>
                <div id="error" class="error hidden"></div>
            </div>

            <div id="peopleSection" class="people-section">
                <h2>üë• –£—á–∞—Å—Ç–Ω–∏–∫–∏</h2>
                <div class="people-input">
                    <input type="text" id="personName" placeholder="–í–≤–µ–¥–∏—Ç–µ –∏–º—è —É—á–∞—Å—Ç–Ω–∏–∫–∞..." onkeypress="handlePersonKeyPress(event)">
                    <button class="add-person-btn" onclick="addPerson()">–î–æ–±–∞–≤–∏—Ç—å</button>
                </div>
                <div id="peopleList" class="people-list"></div>
            </div>

            <div id="itemsSection" class="items-section hidden">
                <h2>üçî –í—ã–±–µ—Ä–∏—Ç–µ, –∫—Ç–æ —á—Ç–æ –∑–∞–∫–∞–∑–∞–ª</h2>
                <div id="itemsList"></div>
            </div>

            <div id="summary" class="summary hidden">
                <h2>üí∞ –ò—Ç–æ–≥–æ–≤—ã–π —Ä–∞—Å—á–µ—Ç</h2>
                <div id="summaryContent"></div>
            </div>
        </div>
    </div>

    <script>
        let orderData = {
            items: [],
            deliveryCost: 0,
            serviceFee: 0,
            total: 0
        };
        let people = ['–ï–≥–æ—Ä', '–î–∏–º–∞', '–°–∞–Ω—è'];

        function showError(message) {
            const errorDiv = document.getElementById('error');
            errorDiv.textContent = message;
            errorDiv.classList.remove('hidden');
        }

        function hideError() {
            document.getElementById('error').classList.add('hidden');
        }

        function parsePrice(priceStr) {
            // –£–±–∏—Ä–∞–µ–º –≤—Å–µ –ª–∏—à–Ω–∏–µ —Å–∏–º–≤–æ–ª—ã –∏ –æ—Å—Ç–∞–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ —Ü–∏—Ñ—Ä—ã –∏ —Ç–æ—á–∫—É/–∑–∞–ø—è—Ç—É—é
            const cleanStr = priceStr.replace(/[^\d.,]/g, '');
            // –ó–∞–º–µ–Ω—è–µ–º –∑–∞–ø—è—Ç—É—é –Ω–∞ —Ç–æ—á–∫—É –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –ø–∞—Ä—Å–∏–Ω–≥–∞
            const normalizedStr = cleanStr.replace(',', '.');
            return parseFloat(normalizedStr) || 0;
        }

        function formatPrice(price) {
            return price % 1 === 0 ? price.toString() : price.toFixed(2);
        }

 function parseOrder() {
    const text = document.getElementById('orderText').value.trim();
    hideError();

    if (!text) {
        showError('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç –∑–∞–∫–∞–∑–∞');
        return;
    }

    if (!text.includes('–°–æ—Å—Ç–∞–≤ –∑–∞–∫–∞–∑–∞')) {
        showError('–¢–µ–∫—Å—Ç –¥–æ–ª–∂–µ–Ω –Ω–∞—á–∏–Ω–∞—Ç—å—Å—è —Å "–°–æ—Å—Ç–∞–≤ –∑–∞–∫–∞–∑–∞"');
        return;
    }

    if (!text.match(/–ò—Ç–æ–≥–æ\s+[\d.,]+\s*‚ÇΩ/)) {
        showError('–¢–µ–∫—Å—Ç –¥–æ–ª–∂–µ–Ω –∑–∞–∫–∞–Ω—á–∏–≤–∞—Ç—å—Å—è "–ò—Ç–æ–≥–æ XXX ‚ÇΩ"');
        return;
    }

    try {
        // –ü–∞—Ä—Å–∏–º –ø–æ–∑–∏—Ü–∏–∏
        const items = [];
        const lines = text.split('\n').map(line => line.trim()).filter(line => line);
        let parsingItems = false;
        
        for (let i = 0; i < lines.length; i++) {
            const line = lines[i];
            
            if (line === '–°–æ—Å—Ç–∞–≤ –∑–∞–∫–∞–∑–∞') {
                parsingItems = true;
                continue;
            }
            
            if (line.includes('–î–æ—Å—Ç–∞–≤–∫–∞ –∏ –æ–ø–ª–∞—Ç–∞') || line.includes('–°—Ç–æ–∏–º–æ—Å—Ç—å —Ç–æ–≤–∞—Ä–æ–≤')) {
                parsingItems = false;
                continue;
            }
            
            if (parsingItems) {
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ —ç—Ç–æ –Ω–∞–∑–≤–∞–Ω–∏–µ–º –±–ª—é–¥–∞ (–Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç "‚ÇΩ" –∏ –Ω–µ —è–≤–ª—è–µ—Ç—Å—è —Å—Ç—Ä–æ–∫–æ–π —Ç–æ–ª—å–∫–æ –∏–∑ —Ü–∏—Ñ—Ä/–ø—Ä–æ–±–µ–ª–æ–≤)
                if (!line.includes('‚ÇΩ') && !line.match(/^[\d.,\s]+$/) && 
                    (i + 1 < lines.length && lines[i + 1].includes('—à—Ç'))) {
                    
                    const itemName = line;
                    let quantity = 1;
                    let price = 0;
                    
                    // –°–ª–µ–¥—É—é—â–∞—è —Å—Ç—Ä–æ–∫–∞ - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ
                    if (i + 1 < lines.length && lines[i + 1].includes('—à—Ç')) {
                        const qtyMatch = lines[i + 1].match(/(\d+)\s*—à—Ç/);
                        if (qtyMatch) {
                            quantity = parseInt(qtyMatch[1]);
                        }
                        i++; // –ü—Ä–æ–ø—É—Å–∫–∞–µ–º —Å—Ç—Ä–æ–∫—É —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º
                    }
                    
                    // –ò—â–µ–º —Ü–µ–Ω—É –≤ —Å–ª–µ–¥—É—é—â–∏—Ö —Å—Ç—Ä–æ–∫–∞—Ö
                    for (let j = i + 1; j < Math.min(i + 4, lines.length); j++) {
                        if (lines[j].includes('‚ÇΩ')) {
                            // –°–Ω–∞—á–∞–ª–∞ –∏—â–µ–º —Ü–µ–Ω—É –∑–∞ —à—Ç—É–∫—É
                            const unitPriceMatch = lines[j].match(/([\d.,]+)\s*‚ÇΩ\/\s*—à—Ç/);
                            if (unitPriceMatch) {
                                price = parsePrice(unitPriceMatch[1]);
                                break;
                            }
                            
                            // –ï—Å–ª–∏ –Ω–µ –Ω–∞—à–ª–∏ —Ü–µ–Ω—É –∑–∞ —à—Ç—É–∫—É, –∏—â–µ–º –æ–±—ã—á–Ω—É—é —Ü–µ–Ω—É
                            const priceMatch = lines[j].match(/([\d.,]+)\s*‚ÇΩ/);
                            if (priceMatch) {
                                price = parsePrice(priceMatch[1]);
                                // –ï—Å–ª–∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–æ–ª—å—à–µ 1, –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ–º —á—Ç–æ —ç—Ç–æ –æ–±—â–∞—è —Ü–µ–Ω–∞
                                if (quantity > 1) {
                                    price = price / quantity;
                                }
                                break;
                            }
                        }
                    }
                    
                    if (price > 0) {
                        for (let k = 0; k < quantity; k++) {
                            items.push({
                                name: itemName,
                                price: price,
                                id: items.length + k
                            });
                        }
                    }
                }
            }
        }

        // –ü–∞—Ä—Å–∏–º –¥–æ—Å—Ç–∞–≤–∫—É –∏ —Å–±–æ—Ä—ã
        let deliveryCost = 0;
        let serviceFee = 0;
        let total = 0;

        const deliveryMatch = text.match(/–°—Ç–æ–∏–º–æ—Å—Ç—å –¥–æ—Å—Ç–∞–≤–∫–∏\s+([\d.,]+)\s*‚ÇΩ/);
        if (deliveryMatch) {
            deliveryCost = parsePrice(deliveryMatch[1]);
        }

        const serviceMatch = text.match(/–°–µ—Ä–≤–∏—Å–Ω—ã–π —Å–±–æ—Ä\s+([\d.,]+)\s*‚ÇΩ/);
        if (serviceMatch) {
            serviceFee = parsePrice(serviceMatch[1]);
        }

        const totalMatch = text.match(/–ò—Ç–æ–≥–æ\s+([\d.,]+)\s*‚ÇΩ/);
        if (totalMatch) {
            total = parsePrice(totalMatch[1]);
        }

        orderData = {
            items: items,
            deliveryCost: deliveryCost,
            serviceFee: serviceFee,
            total: total
        };

        if (items.length === 0) {
            showError('–ù–µ —É–¥–∞–ª–æ—Å—å –Ω–∞–π—Ç–∏ –ø–æ–∑–∏—Ü–∏–∏ –≤ –∑–∞–∫–∞–∑–µ. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–æ—Ä–º–∞—Ç —Ç–µ–∫—Å—Ç–∞.');
            return;
        }

        console.log('Parsed items:', items); // –î–æ–±–∞–≤–∏–º –ª–æ–≥ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
        document.getElementById('peopleSection').classList.remove('hidden');
        updateItemsDisplay();
        
    } catch (error) {
        showError('–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –∑–∞–∫–∞–∑–∞: ' + error.message);
        console.error(error);
    }
}

        function handlePersonKeyPress(event) {
            if (event.key === 'Enter') {
                addPerson();
            }
        }

        function addPerson() {
            const input = document.getElementById('personName');
            const name = input.value.trim();
            
            if (!name) return;
            
            if (people.includes(name)) {
                showError('–£—á–∞—Å—Ç–Ω–∏–∫ —Å —Ç–∞–∫–∏–º –∏–º–µ–Ω–µ–º —É–∂–µ –¥–æ–±–∞–≤–ª–µ–Ω');
                return;
            }
            
            people.push(name);
            input.value = '';
            updatePeopleDisplay();
            updateItemsDisplay();
            hideError();
        }

        function removePerson(name) {
            people = people.filter(p => p !== name);
            updatePeopleDisplay();
            updateItemsDisplay();
            updateSummary();
        }

        function updatePeopleDisplay() {
            const container = document.getElementById('peopleList');
            container.innerHTML = people.map(person => `
                <div class="person-tag">
                    ${person}
                    <button class="remove-person" onclick="removePerson('${person}')">√ó</button>
                </div>
            `).join('');
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        document.addEventListener('DOMContentLoaded', function() {
            updatePeopleDisplay();
        });

		function updateItemsDisplay() {
			if (people.length === 0 || orderData.items.length === 0) {
				document.getElementById('itemsSection').classList.add('hidden');
				document.getElementById('summary').classList.add('hidden');
				return;
			}

			const container = document.getElementById('itemsList');
			container.innerHTML = orderData.items.map((item, index) => {
				// –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ —É–∂–µ –≤—ã–±—Ä–∞–Ω–Ω—ã–µ —á–µ–∫–±–æ–∫—Å—ã –¥–ª—è —ç—Ç–æ–≥–æ —Ç–æ–≤–∞—Ä–∞
				const checkboxes = document.querySelectorAll(`input[data-item-index="${index}"]`);
				let selectedPeople = [];
				checkboxes.forEach(cb => {
					if (cb.checked) selectedPeople.push(cb.dataset.person);
				});

				return `
					<div class="item-card">
						<div class="item-header">
							<div class="item-name">${item.name}</div>
							<div class="item-price">${formatPrice(item.price)} ‚ÇΩ</div>
						</div>
						<div class="person-checkboxes">
							${people.map(person => {
								const isChecked = selectedPeople.includes(person);
								return `
									<label class="checkbox-wrapper ${isChecked ? 'checked' : ''}">
										<input type="checkbox" onchange="updateSummary()" 
											   data-item-index="${index}" 
											   data-person="${person}"
											   ${isChecked ? 'checked' : ''}>
										${person}
									</label>
								`;
							}).join('')}
						</div>
					</div>
				`;
			}).join('');

			document.getElementById('itemsSection').classList.remove('hidden');
			updateSummary();
		}

		function updateSummary() {
			if (people.length === 0) {
				document.getElementById('summary').classList.add('hidden');
				return;
			}

			const summary = {};
			people.forEach(person => {
				summary[person] = {
					items: [],
					total: 0
				};
			});

			// –°–æ–±–∏—Ä–∞–µ–º –≤—Å–µ –≤—ã–±—Ä–∞–Ω–Ω—ã–µ —á–µ–∫–±–æ–∫—Å—ã
			const allCheckboxes = document.querySelectorAll('input[type="checkbox"]:checked');
			
			// –î–ª—è –∫–∞–∂–¥–æ–≥–æ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —á–µ–∫–±–æ–∫—Å–∞ –¥–æ–±–∞–≤–ª—è–µ–º —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π —Ç–æ–≤–∞—Ä
			allCheckboxes.forEach(checkbox => {
				const person = checkbox.dataset.person;
				const itemIndex = checkbox.dataset.itemIndex;
				const item = orderData.items[itemIndex];
				
				if (item) {
					// –î–æ–±–∞–≤–ª—è–µ–º —Ç–æ–≤–∞—Ä —Å –ø–æ–ª–Ω–æ–π —Ü–µ–Ω–æ–π
					summary[person].items.push({
						name: item.name,
						price: item.price,
						isShared: false
					});
					summary[person].total += item.price;
				}
			});

			// –î–æ–±–∞–≤–ª—è–µ–º –¥–æ—Å—Ç–∞–≤–∫—É –∏ —Å–±–æ—Ä—ã, —Ä–∞–∑–¥–µ–ª–µ–Ω–Ω—ã–µ –ø–æ—Ä–æ–≤–Ω—É
			const additionalCosts = orderData.deliveryCost + orderData.serviceFee;
			const costPerPerson = additionalCosts / people.length;
			
			people.forEach(person => {
				if (summary[person].items.length > 0) { // –¢–æ–ª—å–∫–æ –µ—Å–ª–∏ —É —á–µ–ª–æ–≤–µ–∫–∞ –µ—Å—Ç—å –∑–∞–∫–∞–∑—ã
					summary[person].total += costPerPerson;
					summary[person].items.push({
						name: '–î–æ—Å—Ç–∞–≤–∫–∞ –∏ —Å–µ—Ä–≤–∏—Å–Ω—ã–π —Å–±–æ—Ä',
						price: costPerPerson,
						isShared: true
					});
				}
			});

			// –û—Ç–æ–±—Ä–∞–∂–∞–µ–º –∏—Ç–æ–≥–∏
			const summaryContent = document.getElementById('summaryContent');
			summaryContent.innerHTML = people.map(person => {
				const personSummary = summary[person];
				if (personSummary.items.length === 0) return ''; // –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –ª—é–¥–µ–π –±–µ–∑ –∑–∞–∫–∞–∑–æ–≤
				
				return `
					<div class="person-summary">
						<div class="person-name">${person}</div>
						<div class="person-items">
							${personSummary.items.map(item => `
								${item.name}: ${formatPrice(item.price)} ‚ÇΩ${item.isShared ? ' (—Ä–∞–∑–¥–µ–ª–µ–Ω–æ)' : ''}
							`).join('<br>')}
						</div>
						<div class="person-total">–ò—Ç–æ–≥–æ: ${formatPrice(personSummary.total)} ‚ÇΩ</div>
					</div>
				`;
			}).join('');

			document.getElementById('summary').classList.remove('hidden');
		}
    </script>
</body>
</html>
